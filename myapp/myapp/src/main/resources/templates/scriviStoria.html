<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrivi Storia</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="scriviStoria">
    <header>
        <div class="header-content">
            <button class="back-button" onclick="history.back()">
                <img src="/css/images/arrow.png" alt="Indietro">
                <span class="back-text">Torna Indietro</span>
            </button>
            <h1>Scrivi la tua storia</h1>
        </div>
    </header>
    

    <main>
        <div class="form-container">
            <div>
                <label for="titolo">Titolo:</label>
                <input type="text" id="titolo" name="titolo">
            </div>
            <div>
                <label for="descrizione">Descrizione:</label>
                <textarea id="descrizione" name="descrizione"></textarea>
            </div>
            <div>
                <label for="scenario-iniziale">Scenario Iniziale:</label>
                <textarea id="scenario-iniziale" name="scenario-iniziale"></textarea>
            </div>
            <div>
                <button id="add-scenario-button">Aggiungi Scenario</button>
            </div>
            <div id="scenario-container"></div>
        </div>
    </main>

    <div>
        <button id="save-button">Salva</button>
        <!--<button onclick="history.back()">Torna Indietro</button>-->
    </div>

    <footer>
        <p>&copy; 2024 MyApp</p>
    </footer>

    <script>
        document.getElementById('add-scenario-button').addEventListener('click', function() {
            const scenarioGroup = document.createElement('div');
            scenarioGroup.classList.add('scenario-group');
    
            const scenarioHTML = `
                <div>
                    <label for="nome-scenario">Nome Scenario:</label>
                    <input type="text" name="nome-scenario">
                </div>
                <div>
                    <label for="descrizione-scenario">Descrizione Scenario:</label>
                    <textarea name="descrizione-scenario"></textarea>
                </div>
                <div>
                    <label>È richiesto un indovinello?</label>
                    <div class="option-group">
                        <label><input type="radio" name="richiede-indovinello" value="si" class="indovinello"> Sì</label>
                        <label><input type="radio" name="richiede-indovinello" value="no" class="indovinello"> No</label>
                    </div>
                    <div class="indovinello-fields" style="display:none;">
                        <label for="scrivi-indovinello">Scrivi indovinello:</label>
                        <textarea name="scrivi-indovinello"></textarea>
                        <label for="scrivi-risposta-indovinello">Scrivi la risposta all'indovinello:</label>
                        <input type="text" name="scrivi-risposta-indovinello">
                    </div>
                </div>
                <div>
                    <label>È richiesto un oggetto?</label>
                    <div class="option-group">
                        <label><input type="radio" name="richiede-oggetto" value="si" class="oggetto"> Sì</label>
                        <label><input type="radio" name="richiede-oggetto" value="no" class="oggetto"> No</label>
                    </div>
                    <div class="oggetto-fields" style="display:none;">
                        <label for="scrivi-oggetto">Scrivi quale oggetto:</label>
                        <input type="text" name="scrivi-oggetto">
                    </div>
                </div>
                <div>
                    <label>Rilascia un oggetto?</label>
                    <div class="option-group">
                        <label><input type="radio" name="rilascia-oggetto" value="si" class="rilascia"> Sì</label>
                        <label><input type="radio" name="rilascia-oggetto" value="no" class="rilascia"> No</label>
                    </div>
                    <div class="rilascia-fields" style="display:none;">
                        <label for="scrivi-rilascia-oggetto">Scrivi quale oggetto:</label>
                        <input type="text" name="scrivi-rilascia-oggetto">
                    </div>
                </div>
                <div>
                    <label for="scegli-scenario-precedente">Scegli Scenario Precedente:</label>
                    <select name="scegli-scenario-precedente">
                        <option value="">-- Seleziona --</option>
                        <!-- Qui verranno aggiunti gli scenari disponibili -->
                    </select>
                </div>
            `;
    
            scenarioGroup.innerHTML = scenarioHTML;
            document.getElementById('scenario-container').appendChild(scenarioGroup);
    
            // Aggiungi listener per far apparire i campi aggiuntivi quando necessario
            scenarioGroup.querySelectorAll('input[name="richiede-indovinello"]').forEach(function(el) {
                el.addEventListener('change', function() {
                    const indovinelloFields = scenarioGroup.querySelector('.indovinello-fields');
                    indovinelloFields.style.display = el.value === 'si' ? 'block' : 'none';
                });
            });
    
            scenarioGroup.querySelectorAll('input[name="richiede-oggetto"]').forEach(function(el) {
                el.addEventListener('change', function() {
                    const oggettoFields = scenarioGroup.querySelector('.oggetto-fields');
                    oggettoFields.style.display = el.value === 'si' ? 'block' : 'none';
                });
            });
    
            scenarioGroup.querySelectorAll('input[name="rilascia-oggetto"]').forEach(function(el) {
                el.addEventListener('change', function() {
                    const rilasciaFields = scenarioGroup.querySelector('.rilascia-fields');
                    rilasciaFields.style.display = el.value === 'si' ? 'block' : 'none';
                });
            });
        });
    </script>
    
</body>
</html>
